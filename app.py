import streamlit as st

# è®¾ç½®é¡µé¢é…ç½®ï¼Œå¿…é¡»æ˜¯ç¬¬ä¸€æ¡æ‰§è¡Œçš„ Streamlit å‘½ä»¤
# è®¾ç½®é¡µé¢æ ‡é¢˜ä¸º"ç®€å†åˆ†æç³»ç»Ÿ"ï¼Œå¸ƒå±€ä¸º"wide"ï¼ˆå®½å±æ¨¡å¼ï¼‰
st.set_page_config(page_title="ç®€å†åˆ†æç³»ç»Ÿ", layout="wide")

# å¯¼å…¥è®¤è¯æ¨¡å—çš„å„ä¸ªå‡½æ•°
from modules.auth import (get_auth, get_login, get_register,
                          get_logout, get_forgot_password)

# è·å–è®¤è¯å™¨å®ä¾‹
authenticator = get_auth()

# æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç»é€šè¿‡è®¤è¯
if st.session_state["authentication_status"]:
    # å¦‚æœå·²ç»è®¤è¯ï¼Œè·å–ç”¨æˆ·å
    user_info = st.session_state.username
    # åœ¨ä¾§è¾¹æ æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
    st.sidebar.success(f"æ¬¢è¿ç”¨æˆ· {user_info}")
    # æ˜¾ç¤ºæ³¨é”€æŒ‰é’®
    get_logout(authenticator)
    # æ„å»ºå¸¦æœ‰Streamlit Ant Designç»„ä»¶çš„ä¾§è¾¹èœå•
    # æ¯ä¸ªé“¾æ¥éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„æ ‡ç­¾å’Œå›¾æ ‡
    st.sidebar.page_link("app.py", label=":red[é¦–é¡µ]", icon="ğŸ ")
    st.sidebar.page_link("pages/1_ğŸ _ç®€å†.py", label=":violet[ç®€å†ä¸Šä¼ ]", icon="ğŸ“‘")
    st.sidebar.page_link("pages/2_ğŸ”_èŒä½æ¨è.py", label=":blue[å²—ä½æ¨è]", icon="ğŸ”")
    st.sidebar.page_link("pages/3_ğŸ“Š_èƒ½åŠ›è¯„ä¼°.py", label=":green[èƒ½åŠ›è¯„ä»·]", icon="ğŸ“Š")
    st.sidebar.page_link("pages/4_ğŸ—ºï¸_èŒåœºè¶‹åŠ¿.py", label=":orange[å°±ä¸šè¶‹åŠ¿]", icon="ğŸ—ºï¸")

    # åœ¨ä¸»é¡µé¢ä¸Šæ˜¾ç¤ºæ ‡é¢˜
    st.title('ç®€å†åˆ†æç³»ç»Ÿ')

    # æ˜¾ç¤ºé¡¹ç›®ä»‹ç»çš„æ ‡é¢˜å’Œå†…å®¹
    st.header("é¡¹ç›®ä»‹ç»")
    st.markdown("""
        æœ¬ç³»ç»Ÿæ—¨åœ¨å¸®åŠ©å¤§å­¦ç”Ÿæ˜ç¡®è‡ªèº«åœ¨æ„å‘å²—ä½ä¸Šçš„çŸ¥è¯†å’ŒæŠ€èƒ½çŸ­æ¿ï¼Œå¿«é€Ÿå®šä½åˆ°ç†æƒ³èŒä½ã€‚
        é€šè¿‡æ™ºèƒ½ç®€å†åˆ†æç³»ç»Ÿï¼Œæˆ‘ä»¬é™ä½äº†ä¼ä¸šä¸æ±‚èŒè€…ä¹‹é—´çš„åŒ¹é…æˆæœ¬ï¼Œå¹¶æé«˜äº†æ±‚èŒå’Œæ‹›è˜çš„æ•ˆç‡ã€‚
    """)

    # æ˜¾ç¤ºåˆ›æ„æè¿°çš„æ ‡é¢˜å’Œå†…å®¹
    st.header("åˆ›æ„æè¿°")
    st.markdown("""
        ç³»ç»Ÿé€šè¿‡è‡ªç„¶è¯­è¨€å¤„ç†å’Œå®ä½“è¯†åˆ«æŠ€æœ¯æå–ç®€å†å…³é”®ä¿¡æ¯ï¼Œåˆ©ç”¨æœºå™¨å­¦ä¹ ç®—æ³•è¿›è¡ŒèŒä½åŒ¹é…ï¼Œ
        å¹¶é€šè¿‡çŸ¥è¯†å›¾è°±å¯¹èŒä½ä¿¡æ¯å’Œæ±‚èŒè€…èµ„æ–™è¿›è¡Œæ·±å…¥åˆ†æï¼Œä»è€Œæä¾›ä¸ªæ€§åŒ–çš„èŒä½æ¨èã€‚
    """)

    # æ˜¾ç¤ºåŠŸèƒ½ç®€ä»‹çš„æ ‡é¢˜å’Œå†…å®¹
    st.header("åŠŸèƒ½ç®€ä»‹")
    st.markdown("""
        - **çŸ¥è¯†å›¾è°±æ„å»º**ï¼šæ„å»ºèŒä½å’ŒæŠ€èƒ½è¦æ±‚çš„çŸ¥è¯†å›¾è°±ï¼Œä¸ºæ¨èç³»ç»Ÿæä¾›æ”¯æŒã€‚
        - **ç®€å†ä¸Šä¼ ä¸è§£æ**ï¼šæ·±å…¥èšåˆå’Œåˆ†æç”¨æˆ·çš„ç®€å†å’ŒèŒä¸šç‰¹å¾ã€‚
        - **èŒä½æ¨èæ¨¡å‹**ï¼šåŸºäºå†…å®¹çš„æ¨èï¼Œé€šè¿‡æŠ€èƒ½åŒ¹é…ã€æ•™è‚²æ°´å¹³åŒ¹é…ã€ç»éªŒåŒ¹é…æä¾›èŒä½æ¨èã€‚
        - **èƒ½åŠ›è¯„ä¼°**ï¼šæä¾›é’ˆå¯¹æ„Ÿå…´è¶£èŒä½çš„æ·±å…¥èƒ½åŠ›è¯„ä¼°å’Œå¯è§†åŒ–å±•ç¤ºã€‚
    """)

    # æ˜¾ç¤ºç»“è¯­çš„æ ‡é¢˜å’Œå†…å®¹
    st.header("ç»“è¯­")
    st.markdown("""
        é€šè¿‡æ™ºèƒ½ç®€å†åˆ†æç³»ç»Ÿï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ç§åˆ›æ–°çš„æ–¹å¼æ¥æ´å¯Ÿå’Œå½±å“æ±‚èŒå¸‚åœºï¼Œæé«˜äº†æ±‚èŒè€…å’Œæ‹›è˜äººå‘˜çš„äº’åŠ¨æ•ˆç‡ã€‚
        æˆ‘ä»¬å°†æŒç»­ä¼˜åŒ–å’Œå‡çº§ç³»ç»Ÿï¼Œä»¥é€‚åº”å¸‚åœºçš„å˜åŒ–ï¼Œæä¾›æœ€ä½³çš„ç”¨æˆ·ä½“éªŒã€‚
    """)

else:
    # å¦‚æœç”¨æˆ·æœªè®¤è¯ï¼Œæ˜¾ç¤ºç™»å½•ã€æ³¨å†Œå’Œå¿˜è®°å¯†ç çš„é€‰é¡¹å¡
    st.title(':world_map: _:blue[èŒèƒ½å›¾è°±]_ ï¼šå¼€å¯èŒä¸šæ–°æœªæ¥ï¼ŒåŠ©åŠ›ç²¾å‡†å°±ä¸šï¼')
    col1, col2 = st.columns(2)
    
    with col1:
        # åœ¨ç¬¬ä¸€åˆ—æ˜¾ç¤ºå›¾ç‰‡
        st.image('poster2.png', use_column_width=True)
        
    with col2:
        # åœ¨ç¬¬äºŒåˆ—æ˜¾ç¤ºç™»å½•ã€æ³¨å†Œå’Œå¿˜è®°å¯†ç çš„é€‰é¡¹å¡
        tab1, tab2, tab3 = st.tabs(['Login', 'Register', 'ForgotPassword'])

        with tab1:
            # åœ¨ç™»å½•é€‰é¡¹å¡ä¸­æ˜¾ç¤ºç™»å½•è¡¨å•
            get_login(authenticator)

        with tab2:
            # åœ¨æ³¨å†Œé€‰é¡¹å¡ä¸­æ˜¾ç¤ºæ³¨å†Œè¡¨å•
            get_register(authenticator)

        with tab3:
            # åœ¨å¿˜è®°å¯†ç é€‰é¡¹å¡ä¸­æ˜¾ç¤ºå¿˜è®°å¯†ç è¡¨å•
            get_forgot_password(authenticator)